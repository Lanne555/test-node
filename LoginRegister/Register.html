﻿<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ระบบประกาศคะแนน</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" 
    crossorigin="anonymous">
    <link rel="stylesheet" href="register.css">
</head>
<body>
    <img class="logo" src="Bodin2.png">
    <div class="plan">
        <form id="MainForm" class="w-25 m-4">
            <h2 class="text1">ระบบประกาศคะแนน</h2>
            <h2 class="text2">Register</h2>
            <div class="inputtext">
                <h1 class="textlabel">Email</h1>
                <input type="email" class="form-control" id="emailInput" placeholder="name@example.com">
            </div>
            <div class="inputtext">
                <h1 class="textlabel">Password</h1>
                <input type="password" class="form-control" id="PasswordInput" placeholder="Password">
                <div class="checkbox">
                    <input class="showpassword" type="checkbox" onclick="myFunction()">
                    <h6  class="textshowpassword">showpassword</h1>
                </div>
            </div>
            <div class="inputtext">
                <h1 class="textlabel">Number</h1>
                <input type="number" class="form-control" id="StudentIDInput" placeholder="Number">
            </div>
            <div class="inputtext">
                <h1 class="textlabel">Name</h1>
                <input type="text" class="form-control" id="NameInput" placeholder="Name">
            </div>
            
            <div class="btn0">
                <button type="submit" class="btn1" >Create User</button>
                <a href="Login.html"> <button type="button" class="btn2" >Login</button> </a>
            </div>
        </form>
    </div>
    <script>
        function myFunction() {
    var x = document.getElementById("PasswordInput");
    if (x.type === "password") {
        x.type = "text";
    } else {
        x.type = "password";
    }
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>

    <script type="module">
        
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore,doc,setDoc,collection,getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth,createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        //import { initializeApp } from 'firebase/app';
        //import { getAnalytics } from "firebase/analytics";
        //import { getFirestore, collection, getDocs,setDoc} from 'firebase/firestore/lite';
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCXiugat6JBWNZwzmvVUHQLD4TNuo7oVZE",
            authDomain: "aichat-405615.firebaseapp.com",
            projectId: "aichat-405615",
            storageBucket: "aichat-405615.appspot.com",
            messagingSenderId: "488569947854",
            appId: "1:488569947854:web:b5fb87aefcb7116e63b29f",
            measurementId: "G-YTZLH338LQ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const analytics = getAnalytics(app);

        let emailInput = document.getElementById('emailInput');
        let passwordInput = document.getElementById('PasswordInput');
        let studentIDInput = document.getElementById('StudentIDInput');
        let nameInput = document.getElementById('NameInput');

        let RegiserUser = evt =>{
            evt.preventDefault();
            createUserWithEmailAndPassword(auth,emailInput.value, passwordInput.value)
            .then(async(credentials) => {
                alert("Register success")    
                var ref = doc(db,"UserAuthList",credentials.user.uid);
                // var ref = setDoc(db,"UserAuthList");
                
                await setDoc(ref , {

                        StudentID: studentIDInput.value,
                        NameInput: nameInput.value
                    //var ref = doc(db,"UserAuthList",credentials.user.uid);     
                   // const data ={
                     //   StudentID: StudentID.value,
                       // NameInput: NameInput.value
                    })
                    //setDoc(ref,data)
                });


                    
           /// }
            
            //)
            
        }
        MainForm.addEventListener('submit',RegiserUser)
    </script>
</body>
</html>